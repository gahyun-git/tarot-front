(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3117:(e,s,a)=>{Promise.resolve().then(a.bind(a,7816))},7816:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var l=a(5155),i=a(2115);async function n(e){var s;let a=await fetch("".concat("http://localhost:8008","/reading/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),l=await a.json();if(!a.ok)throw Error((null==l||null==(s=l.error)?void 0:s.message)||"request failed");return l}function t(e){let{onSuccess:s}=e,[a,t]=(0,i.useState)(""),[r,d]=(0,i.useState)(["A","B","C"]),[c,o]=(0,i.useState)(3),[u,m]=(0,i.useState)(""),[x,p]=(0,i.useState)(!0),[h,j]=(0,i.useState)(!1),[g,f]=(0,i.useState)(null),v=async()=>{j(!0),f(null);try{let e=await n({question:a,group_order:r,shuffle_times:c,seed:""===u?null:Number(u),allow_reversed:x});s(e)}catch(e){f(e instanceof Error?e.message:"request failed")}finally{j(!1)}};return(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("label",{className:"grid gap-1",children:[(0,l.jsx)("span",{children:"Question"}),(0,l.jsx)("input",{className:"border rounded px-3 py-2",value:a,onChange:e=>t(e.target.value),placeholder:"올해 커리어 방향?"})]}),(0,l.jsxs)("label",{className:"grid gap-1",children:[(0,l.jsx)("span",{children:"Group Order"}),(0,l.jsx)("select",{className:"border rounded px-3 py-2",value:r.join(""),onChange:e=>{d({ABC:["A","B","C"],ACB:["A","C","B"],BAC:["B","A","C"],BCA:["B","C","A"],CAB:["C","A","B"],CBA:["C","B","A"]}[e.target.value])},children:["ABC","ACB","BAC","BCA","CAB","CBA"].map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]}),(0,l.jsxs)("label",{className:"grid gap-1",children:[(0,l.jsx)("span",{children:"Shuffle Times"}),(0,l.jsx)("input",{type:"number",min:1,max:50,className:"border rounded px-3 py-2 w-28",value:c,onChange:e=>o(Number(e.target.value))})]}),(0,l.jsxs)("label",{className:"grid gap-1",children:[(0,l.jsx)("span",{children:"Seed (optional)"}),(0,l.jsx)("input",{className:"border rounded px-3 py-2 w-40",value:u,onChange:e=>m(e.target.value),placeholder:"e.g. 123"})]}),(0,l.jsxs)("label",{className:"inline-flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:x,onChange:e=>p(e.target.checked)})," Allow Reversed"]}),(0,l.jsx)("button",{className:"bg-black text-white rounded px-4 py-2 w-40 disabled:opacity-50",onClick:v,disabled:h||0===a.trim().length,children:h?"Loading...":"Draw 8 Cards"}),g&&(0,l.jsx)("div",{className:"text-red-600",children:g})]})}function r(e){let{open:s,onClose:a,children:n}=e;return((0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&a()};return s&&window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s,a]),s)?(0,l.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:a}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded shadow max-w-lg w-full p-4",children:[(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)("button",{className:"px-2 py-1",onClick:a,children:"✕"})}),(0,l.jsx)("div",{children:n})]})})]}):null}let d={1:"이슈",2:"숨은 영향",3:"과거",4:"현재",5:"근미래",6:"내면",7:"외부",8:"솔루션"};function c(e){let{data:s}=e,[a,n]=(0,i.useState)(!1),[t,c]=(0,i.useState)(s.items[0]);return(0,l.jsxs)("section",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"Result"}),(0,l.jsxs)("div",{className:"grid gap-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-end",children:[s.items.filter(e=>[1,2].includes(e.position)).map(e=>(0,l.jsx)(o,{...e,onClick:()=>{c(e),n(!0)}},e.position)),(0,l.jsx)("div",{}),(0,l.jsx)("div",{className:"justify-self-end",children:(0,l.jsx)(o,{...s.items.find(e=>8===e.position),onClick:()=>{c(s.items.find(e=>8===e.position)),n(!0)}})})]}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-4",children:s.items.filter(e=>[3,4,5].includes(e.position)).map(e=>(0,l.jsx)(o,{...e,onClick:()=>{c(e),n(!0)}},e.position))}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-4",children:s.items.filter(e=>[6,7].includes(e.position)).map(e=>(0,l.jsx)(o,{...e,onClick:()=>{c(e),n(!0)}},e.position))})]}),(0,l.jsx)(r,{open:a,onClose:()=>n(!1),children:(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["#",t.position," ",d[t.position]]}),(0,l.jsxs)("div",{className:"text-lg font-semibold",children:[t.card.name," ",t.is_reversed?"(Reversed)":""]}),t.card.image_url&&(0,l.jsx)("img",{src:t.card.image_url,alt:t.card.name,className:"w-full ".concat(t.is_reversed?"rotate-180":"")})]})})]})}function o(e){return(0,l.jsxs)("button",{onClick:e.onClick,className:"text-left border rounded p-2 hover:shadow focus:shadow",children:[(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["#",e.position," ",e.is_reversed?"(Reversed)":""]}),(0,l.jsx)("div",{className:"font-medium",children:e.card.name}),e.card.image_url&&(0,l.jsx)("img",{src:e.card.image_url,alt:e.card.name,className:"mt-2 w-full ".concat(e.is_reversed?"rotate-180":"")})]})}function u(){let[e,s]=(0,i.useState)(null);return(0,l.jsxs)("main",{className:"p-6 max-w-3xl mx-auto space-y-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Tarot Reading"}),(0,l.jsx)(t,{onSuccess:s}),e&&(0,l.jsx)(c,{data:e})]})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=3117)),_N_E=e.O()}]);